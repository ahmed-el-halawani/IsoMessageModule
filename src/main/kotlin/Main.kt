import com.google.gson.Gson

fun main(args: Array<String>) {
//    for (i in 1..64) {
////        println("val field${i} = standerIsoFields.BaseIsoField(3, IsoFieldConversionType.Bcd);")
//        println("field${i},")
//    }

    // 3, 11, 12, 13, 39, 41, 42, 62,

//    setDataToIso()
    parseIsoMessage()
//0220703C05800CC00200


//    baseIsoField.field3.setValue("120")
//    baseIsoField.field3.getHexValue()

}

fun parseIsoMessage() {
    println("log parse data")
    val baseIsoField = BaseIso();
//    baseIsoField.parseIsoMessage("080020200000008000000000000000013239313130303031")
//    baseIsoField.parseIsoMessage("08102038000002C00004920000000039133901062330304E5041593536373835303836393820202020202020202000340032CB5B2AD3CF39CD29BEDDA0A368A0345AFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF")
//    baseIsoField.parseIsoMessage("08002020000000C000009200000000394E50415935363738353038363938202020202020202020")
//    baseIsoField.parseIsoMessage("08002020000000C000069200000000394E5041593536373835303836393820202020202020202000063530383639380003313030")
//    baseIsoField.parseIsoMessage("0220703C05800CC002001647617390010104652000000000000010000000370000002022251200510022000000000000000000000000006666676366664E504159353637383530383639382020202020202020200000\n")
//    baseIsoField.parseIsoMessage("0230302001000A800000200000000000001000000037002200000000000000000000000031324E50415935363738\n\n")
//    baseIsoField.parseIsoMessage("081020200100028001069302000002070000303030303030303030360000892B0055002F00510031004D00010004009E00000002000900656D7074792E61706B030008006D772E656D707479040004009290230005000300312E300600040003000000070004002E0000000800040000C800000A000100080052150030004D6A5A6C5A574D30597A6774597A5A6B4D693030596A4E6C4C546B32597A51744F4441324D544D324E4445795954566B00360E00200026374518892A88FDEE28513DBD4D839546FC9A0FD58E7DFE6EDB6B2A517E0966000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000")
//    baseIsoField.parseIsoMessage("08002020000000C000069200000000394E504159353637383530383639382020202020202020200006353038363938001200100022000212")

    BaseIso().run {
        println("request update")
        parseIsoMessageWithHeader("600000000008002038010000E0011693020000035813102308250000303030303030303635303836393820202020202020202030383230383638393135202020202020202020202020202020202020202020202020202020202020000196002A00C083916CCF7D4FA3CB83555AC28C9F6562AC0383150E4BFD8B65CD309C95085ACA553A25B3D15778EFF983295ADD292CBA47120164FF89BEA36F03AFF95AC31EF1C74948131AE5AAC26719C85DF70E6159513A70F8FEF6FB52851862BE7083F69A4EE647CB1BAC904FF2E65B5A8B350A166E2BD35B1557E0B2418826E40601C911E1B289875EA3BAD2342F6F1E18B88DEC4F9C8413674E8B591F58837857FF2A3CC4CAE53936C002AAF7A2BCA88703705EBB81662535146FD9BFCBAB8D3692C60F00074E49312E302E350260001401007AA84F29219BFC2A5CBEC110962A93F750AA4507F3FEFBB97F08B8A8B054B44E7F3363A3329186C358DED9607F52D9A68C072DD94B652080E6A25A6C075500B40587238D78DDF259C5B9DD5902D9F062EBBD25DFE11F1756F4F9D4D5973FFBFACBB08F36B5A1CB2B90FA946F9DBA8A53B59244E36A95C7506C0C63212161820EB5A56C5D4774FFDCEC166A4D0577FCB0DDA4344ED0856183DA26B486EA40C949142FD454FD96D60C1CAB36DEE9094B12260D889C7BF953028AAE27D3B8DDC7BF0704B5F6C6FE70CF033C735CCCCDB59253708657F7AF537F44D557F3F5E9547053EA09F2FBDED19C8712CE8ABC73DD1715672366E3340EEF7CD5E25390546905026000130100BF561225A7A6C7EA1BEB603A5805F5EE05830EF7EA431A65AB4E46661976AD53E4CC1ED5D3ED2DCA9AD4092C359C5EB4647AE389B0176A8B87CEC7F302F0CDFB6A8FF0F59C02CF415BBE3131EB4B7FAC5F2F89857ED28F8E440B80FDCCE8521367944E18882D5E705E6195A6907D76D8150F61667364E53D8C2EBA2FB8BC11D48F58801D755AE2C504611A0E886932575936D7218C0A9A89C9273CB1EF09597CD1B8C33838AF541D0A61C8E1F5802433CD130F001CB6D38845F37721F8A0682221C14F8AB0BC48B6D5B7EED8383126535543F47816C775DFE95D03EDC415D4C767A013064D99EF9E884496F742C18D5091B2558B20F3E11FE59A6C0D8A5D0F94")
        printSimpleData()
    }
    BaseIso().run {
        println("response update")

        parseIsoMessageWithHeader("6000000000081020200100028001069302000003060000303030303030303030360000892B0055002F00510031004D00010004009E00000002000900656D7074792E61706B030008006D772E656D707479040004009290230005000300312E300600040003000000070004002E0000000800040000C800000A00010008005215003000595449344E474E6B4D4467744E6A4131595330304D475A6B4C574534596A45744D324D324E7A4A685A6A426A4F54426800360E002000A59EABF21DA140236ACDBA8157A512260750FC7B0CE531E5F033ABB46D4C1F430000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000")
        printSimpleData()
    }
    BaseIso().run {
        println("request chank")

        parseIsoMessageWithHeader("600000000008002038010000E0011493030000030713053708250000303030303030303635303836393820202020202020202030383230383638393135202020202020202020202020202020202020202020202020202020202020000020000D0010000100040000009E000900040000000100074E49312E302E35005200150030595449344E474E6B4D4467744E6A4131595330304D475A6B4C574534596A45744D324D324E7A4A685A6A426A4F544268")
        printSimpleData()
    }

}


fun setDataToIso() {

    val baseIsoField = BaseIso()
    //3, 11, 41, 42,
    baseIsoField.mti = "0800"
    baseIsoField.field3.setFieldValue("920000")
    baseIsoField.field11.setFieldValue("39")
    baseIsoField.field41.setFieldValue("NPAY5678")
    baseIsoField.field42.setFieldValue("508698")
    baseIsoField.field62.setFieldValue("508698")
    baseIsoField.parseIsoMessage()
    baseIsoField.printSimpleData()
}
